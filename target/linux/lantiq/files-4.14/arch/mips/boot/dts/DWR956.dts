/dts-v1/;

#include "ar10.dtsi"

#include <dt-bindings/input/input.h>
#include <dt-bindings/mips/lantiq_rcu_gphy.h>

/ {
	compatible = "dlink,dwr-956", "lantiq,xway", "lantiq,ar10";
	model = "D-Link DWR-956";

	chosen {
		bootargs = "console=ttyLTQ0,115200";
	};

	memory@0 {
		reg = <0x0 0x8000000>;
	};

};

&localbus {
	nand@1 {
		compatible = "lantiq,nand-xway";
		lantiq,cs = <1>;
		bank-width = <2>;
		reg = <1 0x0 0x2000000>;
		#address-cells = <1>;
		#size-cells = <1>;

		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;

			partition@0 {
				label = "uboot";
				reg = <0x00000 0x40000>;
				read-only;
			};
			partition@40000 {
				label = "ubootconfig";
				reg = <0x40000 0x40000>;
				read-only;
			};
			partition@80000 {
				label = "gphyfirmware";
				read-only;
				reg = <0x80000 0x40000>;
			};
			partition@c0000 {
				label = "dataA";
				reg = <0xc0000 0x40000>;
				read-only;
			};
			partition@100000 {
				label = "ubi";
				reg = <0x100000 0x7800000>;
			};
			partition@7900000 {
				label = "res";
				reg = <0x7900000 0x100000>;
				read-only;
			};

		};
	};
};

&gpio {
	pinctrl-names = "default";
	pinctrl-0 = <&state_default>;

	state_default: pinmux {
/* ref target/linux/ltqcpe/files-2.6.32/drivers/mtd/nand/ifxmips_mtd_nand.c ifx_gpio_*() setup */
		nand_out {
			lantiq,groups = "nand cle", "nand ale", "nand rd",
                                                "nand d1",
                                                "nand d0", "nand d2",
                                                "nand d7", "nand d6",
                                                "nand d5", "nand d4",
                                                "nand d3", "nand wr", "nand wp",  "nand se";
			lantiq,function = "ebu";
			lantiq,output = <1>;
			lantiq,open-drain = <0>;
			lantiq,pull = <0>;
		};
		nand {
		        lantiq,groups = "nand cs1", "nand rdy";
			lantiq,function = "ebu";
			lantiq,pull = <0>;
		};
	};
};

